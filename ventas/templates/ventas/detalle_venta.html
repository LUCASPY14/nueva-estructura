{% extends "base.html" %}
{% block title %}Detalle de Venta{% endblock %}
{% block content %}
<a href="{% url 'ventas:ventas_lista' %}" class="inline-block mb-4 bg-blue-100 hover:bg-blue-200 text-blue-900 font-semibold py-2 px-4 rounded transition">
    ‚Üê Volver al listado
</a>
<div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-lg">
    <h2 class="text-2xl font-bold mb-6 text-blue-900">Detalle de Venta #{{ venta.id }}</h2>
    <p><strong>Alumno:</strong> {{ venta.alumno }}</p>
    <p><strong>Fecha:</strong> {{ venta.fecha|date:"d/m/Y H:i" }}</p>
    <p><strong>Total:</strong> {{ venta.total }} Gs.</p>
    <h3 class="mt-4 mb-2 font-bold text-lg text-blue-900">Productos vendidos:</h3>
    <table class="min-w-full divide-y divide-gray-200 mb-4">
        <thead>
            <tr class="bg-gray-100">
                <th class="py-2 px-2 text-left">Producto</th>
                <th class="py-2 px-2 text-left">Cantidad</th>
                <th class="py-2 px-2 text-left">Precio Unitario</th>
                <th class="py-2 px-2 text-left">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for detalle in venta.detalles.all %}
            <tr>
                <td class="py-2 px-2">{{ detalle.producto }}</td>
                <td class="py-2 px-2">{{ detalle.cantidad }}</td>
                <td class="py-2 px-2">{{ detalle.precio_unitario }} Gs.</td>
                <td class="py-2 px-2">{{ detalle.subtotal }} Gs.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h3 class="mt-4 mb-2 font-bold text-lg text-blue-900">Pagos realizados:</h3>
    <ul class="list-disc list-inside">
        {% for pago in venta.pagos.all %}
        <li>
            <strong>{{ pago.metodo }}</strong>: {{ pago.monto }} Gs. {% if pago.observacion %}({{ pago.observacion }}){% endif %}
        </li>
        {% empty %}
        <li>No hay pagos registrados.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
